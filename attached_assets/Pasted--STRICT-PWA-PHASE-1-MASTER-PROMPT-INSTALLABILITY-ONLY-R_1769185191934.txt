‚∏ª

‚úÖ STRICT PWA PHASE 1 MASTER PROMPT (INSTALLABILITY ONLY)

ROLE

You are a senior Next.js + PWA engineer working on the KIOSK marketplace codebase.

Your job is to make the app PWA-installable only, with zero business logic changes, zero offline write support, and zero regressions.

‚∏ª

üõë NON-NEGOTIABLE RULES
	‚Ä¢	Audit first. Do NOT code before auditing.
	‚Ä¢	No feature creep.
	‚Ä¢	No offline order/cart/payment logic.
	‚Ä¢	No background sync.
	‚Ä¢	No database changes.
	‚Ä¢	No auth changes.
	‚Ä¢	No API changes.
	‚Ä¢	No breaking routing changes.
	‚Ä¢	No caching of POST/PUT/DELETE requests.
	‚Ä¢	If unsure ‚Üí STOP and ASK.

‚∏ª

1Ô∏è‚É£ MANDATORY AUDIT (BEFORE WRITING CODE)

Inspect and report:

A. Project Structure
	‚Ä¢	Next.js version
	‚Ä¢	App Router or Pages Router
	‚Ä¢	next.config.js (or .mjs)
	‚Ä¢	public/ directory contents
	‚Ä¢	existing meta tags (if any)
	‚Ä¢	existing service workers (confirm NONE exist)

B. PWA Readiness Check

Confirm status of:
	‚Ä¢	manifest.json ‚ùå / ‚úÖ
	‚Ä¢	service worker ‚ùå / ‚úÖ
	‚Ä¢	next-pwa or workbox ‚ùå / ‚úÖ
	‚Ä¢	PWA icons ‚ùå / ‚úÖ
	‚Ä¢	install prompts ‚ùå / ‚úÖ
	‚Ä¢	theme-color meta ‚ùå / ‚úÖ

‚û°Ô∏è STOP and produce an audit report before implementation.

‚∏ª

2Ô∏è‚É£ IMPLEMENTATION SCOPE (PHASE 1 ONLY)

Allowed Deliverables

A. Web App Manifest
Create /public/manifest.json with:
	‚Ä¢	name: KIOSK
	‚Ä¢	short_name: KIOSK
	‚Ä¢	start_url: /
	‚Ä¢	display: standalone
	‚Ä¢	background_color
	‚Ä¢	theme_color
	‚Ä¢	orientation: portrait
	‚Ä¢	icons (standard + maskable)

B. App Icons
Add icons to /public/icons/:
	‚Ä¢	72x72
	‚Ä¢	96x96
	‚Ä¢	128x128
	‚Ä¢	144x144
	‚Ä¢	152x152
	‚Ä¢	192x192
	‚Ä¢	384x384
	‚Ä¢	512x512
	‚Ä¢	Include maskable icons

Do NOT reference external icon URLs.

‚∏ª

C. next-pwa Integration
	‚Ä¢	Install next-pwa
	‚Ä¢	Generate service worker automatically
	‚Ä¢	Cache ONLY:
	‚Ä¢	static assets
	‚Ä¢	fonts
	‚Ä¢	images
	‚Ä¢	JS/CSS bundles

‚ùå Do NOT cache:
	‚Ä¢	API routes
	‚Ä¢	auth requests
	‚Ä¢	cart mutations
	‚Ä¢	order endpoints
	‚Ä¢	payment endpoints

‚∏ª

D. Meta Tags
Add required PWA meta tags:
	‚Ä¢	theme-color
	‚Ä¢	apple-mobile-web-app-capable
	‚Ä¢	apple-touch-icon
	‚Ä¢	viewport-safe configuration

‚∏ª

3Ô∏è‚É£ STRICT OFFLINE RULES
	‚Ä¢	Offline browsing may work for cached static assets
	‚Ä¢	Offline interactions must fail gracefully
	‚Ä¢	No write operations offline
	‚Ä¢	No queuing
	‚Ä¢	No retries
	‚Ä¢	No background sync

‚∏ª

4Ô∏è‚É£ NAMING & BRANDING RULES
	‚Ä¢	Replace MarketHub ‚Üí KIOSK in any PWA-related assets
	‚Ä¢	Do NOT rename legacy code references outside PWA scope
	‚Ä¢	No global refactors

‚∏ª

5Ô∏è‚É£ REGRESSION SAFETY CHECK

After implementation, verify:
	‚Ä¢	App builds successfully
	‚Ä¢	App runs normally online
	‚Ä¢	Auth still works
	‚Ä¢	Orders still work
	‚Ä¢	Payments untouched
	‚Ä¢	Admin unaffected
	‚Ä¢	No console errors
	‚Ä¢	PWA install prompt appears on supported devices
	‚Ä¢	App launches in standalone mode when installed

‚∏ª

6Ô∏è‚É£ MANDATORY EXIT REPORT

Provide a final report with:

A. Files Added / Modified

(list exact paths)

B. Features Implemented
	‚Ä¢	Installability ‚úÖ
	‚Ä¢	Standalone mode ‚úÖ
	‚Ä¢	Icons ‚úÖ
	‚Ä¢	Manifest ‚úÖ
	‚Ä¢	Service worker ‚úÖ

C. Features Explicitly NOT Implemented

(list offline features NOT done)

D. Regression Confirmation

State explicitly:

‚ÄúNo auth, order, payment, messaging, or admin functionality was modified.‚Äù

‚∏ª

üõë STOP CONDITIONS

If any of the following are required:
	‚Ä¢	offline cart
	‚Ä¢	offline checkout
	‚Ä¢	background sync
	‚Ä¢	queueing
	‚Ä¢	data mutation caching
	‚Ä¢	push notifications

‚û°Ô∏è STOP and ask for approval.

‚∏ª

üéØ SUCCESS DEFINITION

KIOSK:
	‚Ä¢	Is installable on Android, iOS, Desktop
	‚Ä¢	Runs in standalone mode
	‚Ä¢	Has correct branding
	‚Ä¢	Has zero business logic changes
	‚Ä¢	Is safe to ship

‚∏ª